import streamlit as st
import pandas as pd
from datetime import date

# --- 1. ç¶²é è¨­å®š ---
st.set_page_config(page_title="å»ºç®¡ç¨‹åºæ§ç®¡è¡¨", page_icon="ğŸ“‹", layout="wide")

st.title("ğŸ“‹ å»ºç®¡è¡Œæ”¿ç¨‹åºæ§ç®¡ç³»çµ±")
st.markdown("é‡å°å»ºç…§ã€é–‹å·¥ã€å‹˜é©—ã€ä½¿ç…§ä¹‹è¡Œæ”¿æµç¨‹æª¢æ ¸èˆ‡é€²åº¦è¿½è¹¤ã€‚")

# --- 2. å·¦å´æ¬„ï¼šæ¡ˆä»¶åŸºæœ¬è³‡æ–™ ---
with st.sidebar:
    st.header("ğŸ¢ æ¡ˆä»¶è³‡è¨Š")
    project_name = st.text_input("å°ˆæ¡ˆåç¨±", value="å°ä¸­æ°´æ¹³ç¶“è²¿æ®µ")
    gov_unit = st.selectbox("æ‰¿è¾¦æ©Ÿé—œ", ["è‡ºä¸­å¸‚æ”¿åºœéƒ½ç™¼å±€", "å°åŒ—å¸‚å»ºç®¡è™•", "æ–°åŒ—å¸‚å·¥å‹™å±€"])
    
    st.divider()
    
    # é€™è£¡å¯ä»¥è¨­å®šä¸€å€‹ç›®æ¨™æ—¥æœŸ
    target_date = st.date_input("é è¨ˆå–å¾—å»ºç…§æ—¥æœŸ", value=date.today())

# --- 3. ä¸»ç•«é¢ï¼šä½¿ç”¨ Tabs åˆ†é ç®¡ç†ä¸åŒéšæ®µ ---
# å»ºç®¡ç¨‹åºé€šå¸¸å¾ˆé•·ï¼Œç”¨åˆ†é åˆ‡æ›æ¯”è¼ƒæ¸…æ¥š
tab1, tab2, tab3, tab4 = st.tabs(["1.å»ºé€ åŸ·ç…§", "2.é–‹å·¥ç”³å ±", "3.æ–½å·¥å‹˜é©—", "4.ä½¿ç”¨åŸ·ç…§"])

# === åˆ†é  1: å»ºé€ åŸ·ç…§ç”³è«‹ ===
with tab1:
    st.subheader("ğŸ“‘ å»ºé€ åŸ·ç…§ç”³è«‹éšæ®µ")
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.markdown("**å¿…å‚™æ–‡ä»¶æª¢æ ¸ (Checklist)**")
        # é€™äº›æ˜¯ç¯„ä¾‹æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥æ”¹æˆæ‚¨å¯¦éš›å·¥ä½œéœ€è¦çš„æ¸…å–®
        check_land = st.checkbox("åœŸåœ°æ¬Šåˆ©è­‰æ˜æ–‡ä»¶ (åœŸåœ°ç™»è¨˜ç°¿è¬„æœ¬)")
        check_arch = st.checkbox("å»ºç¯‰ç·šæŒ‡å®š(ç¤º)åœ–")
        check_drawings = st.checkbox("å»ºç¯‰åœ–èªª (å¹³ç«‹å‰–)")
        check_str = st.checkbox("çµæ§‹è¨ˆç®—æ›¸")
        check_soil = st.checkbox("åœ°åŸºèª¿æŸ¥å ±å‘Š")
    
    with col2:
        st.markdown("**æ›è™Ÿèˆ‡å¯©æŸ¥é€²åº¦**")
        status = st.radio("ç›®å‰ç‹€æ…‹", ["æº–å‚™ä¸­", "å·²æ›è™Ÿ", "é€šçŸ¥æ”¹æ­£", "å¯©æŸ¥é€šé", "é ˜å¾—åŸ·ç…§"], horizontal=True)
        
        if status == "é€šçŸ¥æ”¹æ­£":
            st.text_area("ğŸ”´ ç¼ºå¤±/æ”¹æ­£äº‹é …è¨˜éŒ„", placeholder="ä¾‹å¦‚ï¼šç«‹é¢åœ–é–‹çª—ä½ç½®éœ€ä¿®æ­£...")
        
        if status == "é ˜å¾—åŸ·ç…§":
            st.success(f"ğŸ‰ æ­å–œï¼{project_name} å·²é€²å…¥ä¸‹ä¸€éšæ®µã€‚")
            st.text_input("è¼¸å…¥å»ºç…§è™Ÿç¢¼", placeholder="ä¾‹å¦‚ï¼š114ä¸­éƒ½å»ºå­—ç¬¬00123è™Ÿ")

# === åˆ†é  2: é–‹å·¥ç”³å ± ===
with tab2:
    st.subheader("ğŸ—ï¸ é–‹å·¥ç”³å ±éšæ®µ")
    st.info("æé†’ï¼šæ‡‰æ–¼å–å¾—å»ºç…§å¾Œ 6 å€‹æœˆå…§é–‹å·¥ã€‚")
    
    col1, col2 = st.columns(2)
    with col1:
        st.markdown("**ç”³å ±æ–‡ä»¶**")
        st.checkbox("æ‰¿é€ äºº/ç›£é€ äººè­‰æ›¸")
        st.checkbox("æ–½å·¥è¨ˆç•«æ›¸")
        st.checkbox("ç‡Ÿå»ºå‰©é¤˜åœŸçŸ³æ–¹è™•ç†è¨ˆç•«")
        st.checkbox("ç©ºæ°£æ±¡æŸ“é˜²åˆ¶è²»ç¹³è²»è­‰æ˜")
        
    with col2:
        start_date = st.date_input("å¯¦éš›é–‹å·¥æ—¥æœŸ")
        st.metric("è·é›¢é å®šé–‹å·¥", "å€’æ•¸ 15 å¤©") # é€™è£¡æœªä¾†å¯ä»¥ç”¨ç¨‹å¼è‡ªå‹•ç®—

# === åˆ†é  3: æ–½å·¥å‹˜é©— ===
with tab3:
    st.subheader("ğŸ” æ–½å·¥å‹˜é©—ç”³å ± (å¿…é ˆæŒ‰æ¨“å±¤ç”³å ±)")
    
    # ç”¨è¡¨æ ¼ä¾†ç®¡ç†æ¨“å±¤é€²åº¦æ¯”è¼ƒæ¸…æ¥š
    # é€™è£¡å»ºç«‹ä¸€å€‹ç°¡å–®çš„è³‡æ–™è¡¨
    data = {
        "å‹˜é©—éšæ®µ": ["æ”¾æ¨£å‹˜é©—", "åŸºç¤å‹˜é©—", "1F ç‰ˆå‹˜é©—", "2F ç‰ˆå‹˜é©—", "RFL ç‰ˆå‹˜é©—"],
        "é å®šæ—¥æœŸ": ["2026-02-01", "2026-03-15", "2026-04-20", "2026-05-25", "2026-08-10"],
        "ç‹€æ…‹": ["å·²å®Œæˆ", "é€²è¡Œä¸­", "æœªé–‹å§‹", "æœªé–‹å§‹", "æœªé–‹å§‹"]
    }
    df = pd.DataFrame(data)
    
    # è®“è¡¨æ ¼å¯ä»¥ç›´æ¥ç·¨è¼¯ (Streamlit æ–°åŠŸèƒ½)
    edited_df = st.data_editor(df, num_rows="dynamic")
    
    st.caption("ğŸ’¡ æç¤ºï¼šæ‚¨å¯ä»¥ç›´æ¥é»æ“Šè¡¨æ ¼ä¿®æ”¹ç‹€æ…‹ã€‚")

# === åˆ†é  4: ä½¿ç”¨åŸ·ç…§ ===
with tab4:
    st.subheader("ğŸ  ä½¿ç”¨åŸ·ç…§ç”³è«‹")
    st.warning("æ­¤éšæ®µå°šæœªå•Ÿå‹•")
    st.markdown("å¾…å®Œå·¥å¾Œå¡«å¯«...")

# --- é å°¾ ---
st.write("---")
st.caption(f"ç›®å‰æ“ä½œå°ˆæ¡ˆï¼š{project_name} | è³‡æ–™åƒ…æš«å­˜æ–¼ç€è¦½å™¨ï¼Œé‡æ•´å¾Œå°‡é‡ç½®ã€‚")