import streamlit as st

# --- 1. ç¶²é åŸºç¤è¨­å®š ---
st.set_page_config(
    page_title="å·¥ç¨‹å·¥æœŸè©•ä¼°ç³»çµ±",  # ç€è¦½å™¨æ¨™ç±¤é çš„åç¨±
    page_icon="ğŸ—ï¸",               # ç€è¦½å™¨æ¨™ç±¤é çš„åœ–ç¤º
    layout="wide"                 # ä½¿ç”¨å¯¬è¢å¹•æ¨¡å¼
)

# --- 2. ä¸»æ¨™é¡Œå€ ---
st.title("ğŸ—ï¸ å»ºæ¡ˆå·¥æœŸè©•ä¼°ç³»çµ±")
st.markdown("### åŸºç¤åƒæ•¸è¨­å®š")
st.markdown("è«‹åœ¨ä¸‹æ–¹è¼¸å…¥å°ˆæ¡ˆçš„åŸºæœ¬è³‡æ–™ï¼Œç³»çµ±å°‡å”åŠ©è©¦ç®—é ä¼°å·¥æœŸã€‚")
st.write("---") # åˆ†éš”ç·š

# --- 3. å·¦å´æ¬„ä½ (Sidebar)ï¼šè®“ä½¿ç”¨è€…è¼¸å…¥åƒæ•¸ ---
# ä½¿ç”¨ sidebar å¯ä»¥è®“ç•«é¢æ¯”è¼ƒæ•´æ½”
with st.sidebar:
    st.header("ğŸ“ å°ˆæ¡ˆåƒæ•¸è¼¸å…¥")
    
    # è¼¸å…¥æ–‡å­—
    project_name = st.text_input("å°ˆæ¡ˆåç¨±", value="ç¯„ä¾‹å»ºæ¡ˆA")
    
    # è¼¸å…¥æ•¸å­— (min_value=0 ä»£è¡¨ä¸èƒ½è¼¸å…¥è² æ•¸)
    total_area = st.number_input("ç¸½æ¨“åœ°æ¿é¢ç© (åª)", min_value=0.0, value=500.0, step=10.0)
    
    # è¼¸å…¥æ•´æ•¸
    floor_count = st.number_input("åœ°ä¸Šå±¤æ•¸", min_value=1, value=10, step=1)
    basement_count = st.number_input("åœ°ä¸‹å±¤æ•¸", min_value=0, value=2, step=1)
    
    # ä¸‹æ‹‰é¸å–®
    structure_type = st.selectbox(
        "çµæ§‹å‹å¼", 
        ["RC (é‹¼ç­‹æ··å‡åœŸ)", "SRC (é‹¼éª¨é‹¼ç­‹æ··å‡åœŸ)", "SC (é‹¼éª¨æ§‹é€ )"]
    )

    # ç¯„ä¾‹ï¼šæ‰‹å‹•è¼¸å…¥èª¿æ•´ä¿‚æ•¸ (é¿å…å°‡æ©Ÿå¯†ä¿‚æ•¸å¯«æ­»åœ¨ç¨‹å¼ç¢¼ä¸­)
    user_coefficient = st.number_input("å…¬å¸å…§éƒ¨å·¥æœŸä¿‚æ•¸ (è«‹æ‰‹å‹•è¼¸å…¥)", value=1.0, step=0.1)

# --- 4. ä¸»ç•«é¢ï¼šé‹ç®—é‚è¼¯èˆ‡çµæœé¡¯ç¤º ---

# å»ºç«‹å…©åˆ— (Columns) ä¾†æ’ç‰ˆï¼Œå·¦é‚Šé¡¯ç¤ºè¼¸å…¥æ‘˜è¦ï¼Œå³é‚Šé¡¯ç¤ºçµæœ
col1, col2 = st.columns([1, 1])

with col1:
    st.subheader("ğŸ“‹ è¼¸å…¥ç¢ºèª")
    st.info(f"""
    - **å°ˆæ¡ˆ**: {project_name}
    - **çµæ§‹**: {structure_type}
    - **è¦æ¨¡**: åœ°ä¸Š {floor_count} å±¤ / åœ°ä¸‹ {basement_count} å±¤
    - **é¢ç©**: {total_area} åª
    """)

with col2:
    st.subheader("ğŸ“Š è¨ˆç®—çµæœ")
    
    # æŒ‰éˆ•ï¼šåªæœ‰æŒ‰ä¸‹å¾Œæ‰æœƒåŸ·è¡Œè¨ˆç®—
    if st.button("é–‹å§‹è¨ˆç®—å·¥æœŸ", type="primary"):
        
        # --- [æ ¸å¿ƒè¨ˆç®—å€] æ‚¨æœªä¾†ä¸»è¦ä¿®æ”¹é€™è£¡ ---
        # é€™è£¡ç›®å‰æ˜¯ã€Œå‡å…¬å¼ã€ï¼Œåƒ…ä¾›æ¸¬è©¦é‹ä½œ
        
        # å‡è¨­ï¼šåŸºç¤æº–å‚™æœŸ 30 å¤©
        base_days = 30 
        
        # å‡è¨­ï¼šæ¯åªéœ€è¦ 0.05 å¤© (åƒ…ç‚ºç¤ºç¯„)
        area_days = total_area * 0.05 
        
        # å‡è¨­ï¼šæ¯å±¤æ¨“éœ€è¦ 15 å¤©
        floor_days = (floor_count + basement_count) * 15
        
        # ç¸½å·¥æœŸ = (åŸºç¤ + é¢ç©å½±éŸ¿ + æ¨“å±¤å½±éŸ¿) * ä½¿ç”¨è€…è¼¸å…¥çš„ä¿‚æ•¸
        total_days = (base_days + area_days + floor_days) * user_coefficient
        
        # --- é¡¯ç¤ºçµæœ ---
        st.success("è¨ˆç®—å®Œæˆï¼")
        
        # ä½¿ç”¨ metric å…ƒä»¶é¡¯ç¤ºå¤§å¤§çš„æ•¸å­—
        st.metric(label="é ä¼°ç¸½å·¥æœŸ", value=f"{total_days:.1f} å¤©")
        
        st.warning(f"æ³¨æ„ï¼šæ­¤çµæœåŸºæ–¼ {structure_type} å‡è¨­æ¨¡å‹ï¼Œåƒ…ä¾›åƒè€ƒã€‚")

    else:
        st.write("ğŸ‘ˆ è«‹åœ¨å·¦å´è¼¸å…¥æ•¸æ“šï¼Œä¸¦æŒ‰ä¸‹æŒ‰éˆ•é–‹å§‹è¨ˆç®—ã€‚")